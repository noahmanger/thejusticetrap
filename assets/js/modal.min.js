$(document).ready(function(){var e=$(".js-modal"),a=$("body");e.each(function(e){var a=$(this),o=e+1;a.attr({id:"label_modal_"+o})});var o="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";0===$("#js-modal-page").length&&a.wrapInner('<div id="js-modal-page"></div>'),a.on("click",".js-modal",function(e){var o,l,s=$(this),t=s.data(),d=s.attr("id"),n="undefined"!=typeof t.modalPrefixClass?t.modalPrefixClass+"-":"",i=t.modalText||"",r="undefined"!=typeof t.modalContentId?"#"+t.modalContentId:"",c=t.modalTitle||"",m=t.modalCloseText||"Close",f=t.modalCloseTitle||t.modalCloseText,u=t.modalBackgroundClick||"",v=$("#js-modal-page");o='<dialog id="js-modal" class="'+n+'modal" role="dialog" aria-labelledby="modal-title"><div role="document">',o+='<button id="js-modal-close" class="'+n+'modal-close" data-focus-back="'+d+'" title="'+f+'">'+m+"</button>",""!==c&&(o+='<h1 id="modal-title" class="'+n+'modal-title">'+c+"</h1>"),""!==i?o+="<p>"+i+"</p>":""!==r&&$(r).length&&(o+=$(r).html()),o+="</div></dialog>",$(o).insertAfter(v),a.addClass("no-scroll"),v.attr("aria-hidden","true"),l="disabled"!=u?'<span id="js-modal-overlay" class="'+n+'modal-overlay" title="'+f+'" data-background-click="enabled"><span class="invisible">Close modal</span></span>':'<span id="js-modal-overlay" class="'+n+'modal-overlay" data-background-click="disabled"></span>',$(l).insertAfter($("#js-modal")),$("#js-modal-close").focus(),e.preventDefault()}),a.on("click","#js-modal-close",function(e){var o=$(this),l="#"+o.attr("data-focus-back"),s=$("#js-modal"),t=s.attr("class"),d=t+"--reverse",n=$("#js-modal-overlay"),i=$("#js-modal-page");i.removeAttr("aria-hidden");var r=s.css("animation-duration");if("0s"!=r){var c=1e3*parseFloat(r.replace("s",""));c++,s.removeClass(t),setTimeout(function(){s.addClass(d)},1),setTimeout(function(){a.removeClass("no-scroll"),s.remove(),n.remove(),$(l).focus(),s.removeClass(d),s.addClass(t)},c)}else a.removeClass("no-scroll"),s.remove(),n.remove(),$(l).focus()}).on("click","#js-modal-overlay",function(e){var a=$("#js-modal-close");e.preventDefault(),a.trigger("click")}).on("keydown","#js-modal-overlay",function(e){var a=$("#js-modal-close");(13==e.keyCode||32==e.keyCode)&&(e.preventDefault(),a.trigger("click"))}).on("keydown","#js-modal",function(e){var a=$(this),l=$("#js-modal-close");if(27==e.keyCode&&l.trigger("click"),9==e.keyCode){var s=a.find("*"),t=s.filter(o).filter(":visible"),d=$(document.activeElement),n=t.length,i=t.index(d);e.shiftKey||i!=n-1||(t.get(0).focus(),e.preventDefault()),e.shiftKey&&0==i&&(t.get(n-1).focus(),e.preventDefault())}}).on("keyup",":not(#js-modal)",function(e){var a=($(this),$("#js-modal")),o=$(document.activeElement),l=o.parents("#js-modal").length?!0:!1;$close=$("#js-modal-close"),a.length&&9==e.keyCode&&l===!1&&$close.focus()}).on("focus","#js-modal-tabindex",function(e){$close.focus()})});
